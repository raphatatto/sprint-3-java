<!DOCTYPE html>
<html lang="pt-br" xmlns:th="http://www.thymeleaf.org"
      th:replace="~{fragments/_layout :: layout(
        content=~{::content},
        title='Nova Moto',
        active='motos'
      )}">
<th:block th:fragment="content">
    <h2>Cadastrar e Alocar Moto</h2>

    <form th:action="@{/motos}" method="post" th:object="${moto}">
        <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}"/>

        <!-- ALERTA DENTRO DO FORM (global) -->
        <div class="alert danger" th:if="${#fields.hasGlobalErrors()}">
            <ul style="margin:0;padding-left:18px">
                <li th:each="e : ${#fields.globalErrors()}" th:text="${e}">Erro</li>
            </ul>
        </div>

        <label>Placa
            <input th:field="*{placa}" placeholder="ABC1D23" required/>
            <small class="err" th:if="${#fields.hasErrors('placa')}" th:errors="*{placa}">Erro</small>
        </label>

        <label>Modelo
            <input th:field="*{modelo}" required/>
            <small class="err" th:if="${#fields.hasErrors('modelo')}" th:errors="*{modelo}">Erro</small>
        </label>

        <label>Cor
            <input th:field="*{cor}" placeholder="preta/vermelha/prata"/>
            <small class="err" th:if="${#fields.hasErrors('cor')}" th:errors="*{cor}">Erro</small>
        </label>

        <label>Vaga
            <select th:field="*{codigoVaga}">
                <option value="">(auto - 1Âª LIVRE)</option>
                <option th:each="v : ${vagas}"
                        th:value="${v.codigo}"
                        th:text="${v.codigo + ' - ' + v.setor + ' (' + v.status + ')'}">
                </option>
            </select>
            <small class="err" th:if="${#fields.hasErrors('codigoVaga')}" th:errors="*{codigoVaga}">Erro</small>
        </label>

        <button class="btn ok" type="submit">Salvar</button>
    </form>
</th:block>
</html>
