<!-- templates/motos/list.html -->
<!DOCTYPE html>
<html lang="pt-br" xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/extras/springsecurity"
      th:replace="~{fragments/_layout :: layout(
        content=~{::content},
        title='Motos',
        active='motos'
      )}">
<th:block th:fragment="content">
    <h2>Motos</h2>

    <div th:if="${ok}" class="alert ok" th:text="${ok}"></div>
    <div th:if="${erro}" class="alert danger" th:text="${erro}"></div>

    <div style="margin-bottom:12px">
        <a class="btn ok" th:href="@{/motos/novo}">Cadastrar &amp; Alocar</a>
    </div>

    <table>
        <thead>
        <tr>
            <th>Placa</th><th>Modelo</th><th>Cor</th><th>Status</th><th style="width:340px">Ações</th>
        </tr>
        </thead>
        <tbody>
        <tr th:each="m : ${motos}">
            <td th:text="${m.placa}">ABC1D23</td>
            <td th:text="${m.modelo}">Modelo</td>
            <td th:text="${m.cor}">Preta</td>
            <td th:text="${m.status}">VISTORIA</td>
            <td>
                <!-- editar pede senha na tela seguinte -->
                <a class="btn" th:href="@{|/motos/${m.id}/editar|}">Editar</a>

                <!-- excluir com senha do gerente inline -->
                <form th:action="@{|/motos/${m.id}/excluir|}" method="post" class="inline" style="margin-left:8px">
                    <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}"/>
                    <input name="adminPass" type="password" placeholder="senha gerente" required style="width:160px"/>
                    <button class="btn danger" type="submit">Excluir</button>
                </form>
            </td>
        </tr>
        </tbody>
    </table>
</th:block>
</html>
